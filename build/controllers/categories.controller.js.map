{"version":3,"sources":["../../src/controllers/categories.controller.js"],"names":["Category","require","exports","create","req","res","category","title","body","questions","save","then","data","send","err","status","message","list","find","console","log","currentID","params","id","findOne","_id","dataFound","length","deleted","display","deleteOne","dataDeleted","errDelete","read","findById","update","findByIdAndUpdate","response","err2"],"mappings":"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","sourcesContent":["const Category = require('./../models/category.model');\r\n\r\nexports.create = (req, res) => {\r\n    const category = new Category({\r\n        title: req.body.title,\r\n        questions: req.body.questions,\r\n    });\r\n\r\n    category.save().then(data => {\r\n        res.send({\r\n            data: data\r\n        });\r\n    }).catch((err) => {\r\n        res.status(500).send({\r\n            message: err || \"Some error occured\"\r\n        })\r\n    })\r\n}\r\n\r\nexports.list = (req, res) => {\r\n    Category.find()\r\n        .then((data) => {\r\n            res.send({\r\n                data: data\r\n            });\r\n        })\r\n        .catch(err => console.log(err))\r\n}\r\n\r\nexports.delete = (req, res) => {\r\n    let currentID = req.params.id;\r\n    Category.findOne({ _id: currentID })\r\n        .then((dataFound) => {\r\n            console.log(dataFound);\r\n            if (dataFound.questions.length > 0) {\r\n                res.status(403).send({\r\n                    deleted: false,\r\n                    display: \"Des questions sont rattachées à cette catégorie. La suppression est impossible.\",\r\n                });\r\n            }\r\n            else {\r\n                Category.deleteOne({ _id: currentID })\r\n                    .then((dataDeleted) => {\r\n                        res.status(204).send({\r\n                            deleted: true,\r\n                            display: \"La catégorie a été supprimée avec succès.\",\r\n                        });\r\n                    }).catch(errDelete => console.log(errDelete));\r\n            }\r\n        })\r\n        .catch(err => console.log(err))\r\n}\r\n\r\nexports.read = (req, res) => {\r\n    Category.findById(req.params.id)\r\n        .then((data) => {\r\n            console.log(data);\r\n            res.send({\r\n                data: data\r\n            });\r\n        })\r\n        .catch(err => console.log(err))\r\n}\r\n\r\nexports.update = (req, res) => {\r\n    Category.findByIdAndUpdate(req.params.id, req.body)\r\n        .then((data) => {\r\n            console.log(data);\r\n            Category.findById(req.params.id).then(response => {\r\n                res.send({\r\n                    data: response\r\n                });\r\n            })\r\n                .catch(err2 => console.log(err2))\r\n        })\r\n        .catch(err => console.log(err))\r\n}"],"file":"categories.controller.js"}