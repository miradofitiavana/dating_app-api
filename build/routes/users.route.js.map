{"version":3,"sources":["../../src/routes/users.route.js"],"names":["express","require","multer","router","Router","users","post","register","login","get","getMe","countQuestions","getSuggestions","match","reject","getLikedMe","getMyQuestions","getLikeMutual","DIR","storage","diskStorage","destination","req","file","cb","filename","console","log","ext","mimetype","split","fileName","Date","now","upload","fileFilter","Error","array","firstUpload","module","exports"],"mappings":";;AAOA;;;;AAPA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AAEA,IAAME,MAAM,GAAGH,OAAO,CAACI,MAAR,EAAf;;AACA,IAAMC,KAAK,GAAGJ,OAAO,CAAC,mCAAD,CAArB,C,CAEA;;;AAIAE,MAAM,CAACG,IAAP,CAAY,WAAZ,EAAyBD,KAAK,CAACE,QAA/B;AACAJ,MAAM,CAACG,IAAP,CAAY,QAAZ,EAAsBD,KAAK,CAACG,KAA5B;AACAL,MAAM,CAACM,GAAP,CAAW,OAAX,EAAoBJ,KAAK,CAACK,KAA1B,E,CACA;AACA;AACA;;AACAP,MAAM,CAACM,GAAP,CAAW,aAAX,EAA0BJ,KAAK,CAACM,cAAhC;AACAR,MAAM,CAACM,GAAP,CAAW,mBAAX,EAAgCJ,KAAK,CAACO,cAAtC;AACA;;AACAT,MAAM,CAACG,IAAP,CAAY,aAAZ,EAA2BD,KAAK,CAACQ,KAAjC;AACAV,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BD,KAAK,CAACS,MAAlC;AACA;;AACAX,MAAM,CAACM,GAAP,CAAW,eAAX,EAA4BJ,KAAK,CAACU,UAAlC;AACAZ,MAAM,CAACM,GAAP,CAAW,iBAAX,EAA8BJ,KAAK,CAACW,cAApC;AACAb,MAAM,CAACM,GAAP,CAAW,kBAAX,EAA+BJ,KAAK,CAACY,aAArC;AAGA;AACA;AACA;;AACA,IAAMC,GAAG,GAAG,WAAZ;AAEA,IAAMC,OAAO,GAAGjB,MAAM,CAACkB,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,qBAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC5BA,IAAAA,EAAE,CAAC,IAAD,EAAON,GAAP,CAAF;AACH,GAH8B;AAI/BO,EAAAA,QAAQ,EAAE,kBAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AACzBE,IAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACA,QAAMK,GAAG,GAAGL,IAAI,CAACM,QAAL,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAZ;AACA,QAAMC,QAAQ,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBL,GAApC;AACAJ,IAAAA,EAAE,CAAC,IAAD,EAAOO,QAAP,CAAF;AACH;AAT8B,CAAnB,CAAhB;AAYA,IAAIG,MAAM,GAAGhC,MAAM,CAAC;AAChBiB,EAAAA,OAAO,EAAEA,OADO;AAEhBgB,EAAAA,UAAU,EAAE,oBAACb,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC3B,QAAID,IAAI,CAACM,QAAL,IAAiB,WAAjB,IAAgCN,IAAI,CAACM,QAAL,IAAiB,WAAjD,IAAgEN,IAAI,CAACM,QAAL,IAAiB,YAArF,EAAmG;AAC/FL,MAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH,KAFD,MAEO;AACHA,MAAAA,EAAE,CAAC,IAAD,EAAO,KAAP,CAAF;AACA,aAAOA,EAAE,CAAC,IAAIY,KAAJ,CAAU,2CAAV,CAAD,CAAT;AACH;AACJ;AATe,CAAD,CAAnB;AAYAjC,MAAM,CAACG,IAAP,CAAY,eAAZ,EAA6B4B,MAAM,CAACG,KAAP,CAAa,OAAb,EAAsB,EAAtB,CAA7B,EAAwDhC,KAAK,CAACiC,WAA9D;AAEAC,MAAM,CAACC,OAAP,GAAiBrC,MAAjB","sourcesContent":["const express = require('express');\r\nconst multer = require('multer');\r\n\r\nconst router = express.Router();\r\nconst users = require('./../controllers/users.controller');\r\n\r\n// const verifyToken = require('./../middlewares/verifyToken');\r\nimport verifyToken from \"../middlewares/verifyToken\";\r\n\r\n\r\nrouter.post('/register', users.register);\r\nrouter.post('/login', users.login);\r\nrouter.get('/user', users.getMe);\r\n// router.get('/logout', users.logout);\r\n// router.get('/user/:id', verifyToken, users.getMe);\r\n// router.put('/user/:id', verifyToken, users.updateMe);\r\nrouter.get('/user-count', users.countQuestions);\r\nrouter.get('/user-suggestions', users.getSuggestions);\r\n/** swip */\r\nrouter.post('/user-match', users.match);\r\nrouter.post('/user-reject', users.reject);\r\n/** fin swip */\r\nrouter.get('/user-likedme', users.getLikedMe);\r\nrouter.get('/user-questions', users.getMyQuestions);\r\nrouter.get('/user-likemutual', users.getLikeMutual);\r\n\r\n\r\n/**\r\n * \r\n */\r\nconst DIR = './public/';\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, cb) => {\r\n        cb(null, DIR);\r\n    },\r\n    filename: (req, file, cb) => {\r\n        console.log(file);\r\n        const ext = file.mimetype.split('/')[1];\r\n        const fileName = Date.now() + \".\" + ext;\r\n        cb(null, fileName)\r\n    }\r\n});\r\n\r\nvar upload = multer({\r\n    storage: storage,\r\n    fileFilter: (req, file, cb) => {\r\n        if (file.mimetype == \"image/png\" || file.mimetype == \"image/jpg\" || file.mimetype == \"image/jpeg\") {\r\n            cb(null, true);\r\n        } else {\r\n            cb(null, false);\r\n            return cb(new Error('Only .png, .jpg and .jpeg format allowed!'));\r\n        }\r\n    }\r\n});\r\n\r\nrouter.post('/upload-photo', upload.array('files', 10), users.firstUpload);\r\n\r\nmodule.exports = router;"],"file":"users.route.js"}